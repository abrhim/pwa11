/*!
 * @version v11.0.0-beta.1-1-g6fc2154e-dev
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2gp+":function(e,t,n){"use strict"
var r=n("qWom"),a=n.n(r),i=n("3yN8"),o=n.n(i),s=n("ERkP"),c=n.n(s),l=n("aWzz"),u=n("3at2"),m=n("UIyt"),d=n("YyrX"),p=n("/4dI"),f=n.n(p),b=n("loE8"),v=n("v8zp"),g=n("sAzd"),h=n("QQG3"),y=n("vB0K"),O=n.n(y),E=n("n7cc"),w=n.n(E),j={injectType:"singletonStyleTag",insert:"head",singleton:!0},C=(O()(w.a,j),w.a.locals||{}),_=function Password(e){var t=e.classes,n=e.label,r=e.fieldName,i=e.isToggleButtonHidden,l=e.autoComplete,p=e.validate,h=o()(e,["classes","label","fieldName","isToggleButtonHidden","autoComplete","validate"]),y=function usePassword(){var e=Object(s.useState)(!1),t=f()(e,2),n=t[0],r=t[1],a=Object(s.useCallback)(function(){r(!n)},[n])
return{handleBlur:Object(s.useCallback)(function(){r(!1)},[]),togglePasswordVisibility:a,visible:n}}(),O=y.handleBlur,E=y.togglePasswordVisibility,w=y.visible,j=Object(d.a)(C,t),_=c.a.createElement(b.a,{className:j.passwordButton,onClick:E,type:"button"},w?c.a.createElement(u.a,null):c.a.createElement(m.a,null)),x=w?"text":"password"
return c.a.createElement(v.a,{label:n,classes:{root:j.root}},c.a.createElement(g.a,a()({after:!i&&_,autoComplete:l,field:r,type:x,validate:p,onBlur:O},h)))}
_.propTypes={autoComplete:l.string,classes:Object(l.shape)({root:l.string}),label:l.string,fieldName:l.string,isToggleButtonHidden:l.bool,validate:l.func},_.defaultProps={isToggleButtonHidden:!0,validate:h.c}
t.a=_},"6ctP":function(e,t,n){"use strict"
var r=n("/4dI"),a=n.n(r)
t.a=function(e){if(null==e||!Array.isArray(e))throw new Error("Expected `callbacks` to be array.")
return function(t,n){for(var r=null,i=0;i<e.length;i++){var o=e[i]
if(null==o||!Array.isArray(o)&&"function"!=typeof o)throw new Error("Expected `callbacks["+i+"]` to be array or function.")
if(Array.isArray(o)){var s=a()(o,2),c=s[0],l=s[1]
if("function"!=typeof c)throw new Error("Expected `callbacks["+i+"][0]` to be function.")
r=c(t,n,l)}else r=o(t,n)
if(r)break}return r}}},CQXy:function(e,t,n){(t=e.exports=n("PBB4")(!1)).i(n("uuLD"),""),t.push([e.i,".createAccount-root-SOU {\n    display: grid;\n    gap: 0.9375rem;\n    justify-items: stretch;\n    padding: 1rem 1.5rem;\n}\n\n.createAccount-message-3h- {\n    background-color: rgb(var(--venia-global-color-gray));\n    border-radius: 4px;\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n    padding: 1rem;\n}\n\n.createAccount-message-3h-:empty {\n    display: none;\n}\n\n.createAccount-actions-wdW {\n    display: grid;\n    gap: 1rem;\n    grid-auto-flow: column;\n    justify-content: center;\n    margin-top: 1rem;\n    text-align: center;\n}\n\n.createAccount-cancelButton-34p {\n}\n\n.createAccount-submitButton-2W7 {\n    grid-column-start: 2;\n}\n\n.createAccount-subscribe-1Kj {\n    margin-left: -0.375rem;\n}\n\n@media (max-width: 960px) {\n    .createAccount-actions-wdW {\n        grid-auto-flow: row;\n    }\n\n    .createAccount-submitButton-2W7 {\n        grid-column-start: auto;\n    }\n}\n",""]),t.locals={root:"createAccount-root-SOU",message:"createAccount-message-3h-",actions:"createAccount-actions-wdW",cancelButton:"createAccount-cancelButton-34p "+n("uuLD").locals.root_lowPriority,submitButton:"createAccount-submitButton-2W7 "+n("uuLD").locals.root_highPriority,subscribe:"createAccount-subscribe-1Kj"}},JDxZ:function(e,t,n){(t=e.exports=n("PBB4")(!1)).push([e.i,".checkbox-root-CLA {\n    --stroke: var(--venia-global-color-gray-600);\n    align-items: center;\n    color: rgb(var(--venia-global-color-gray-900));\n    display: grid;\n    gap: calc(0.875rem - 5px);\n    grid-auto-flow: column;\n    grid-template-areas: 'input label';\n    grid-template-columns: min-content 1fr;\n    justify-items: center;\n    line-height: 1.5rem;\n}\n\n.checkbox-input-2Tv {\n    -webkit-appearance: none;\n    background: none;\n    border: 2px solid transparent;\n    border-radius: 4px;\n    cursor: pointer;\n    grid-area: input;\n    height: 1.5rem;\n    width: 1.5rem;\n}\n\n.checkbox-icon-2Jp {\n    grid-area: input;\n    height: 1.5rem;\n    pointer-events: none;\n    width: 1.5rem;\n}\n\n.checkbox-icon-2Jp svg {\n    stroke: rgb(var(--stroke));\n}\n\n.checkbox-label-3N5 {\n    cursor: pointer;\n    font-size: var(--venia-typography-body-M-fontSize);\n    grid-area: label;\n    justify-self: start;\n}\n\n.checkbox-input-2Tv:disabled {\n    cursor: default;\n}\n\n/* When the input is disabled, update the cursor on the sibling label element. */\n.checkbox-input-2Tv:disabled ~ .checkbox-label-3N5 {\n    cursor: default;\n}\n\n.checkbox-input-2Tv:checked:enabled + .checkbox-icon-2Jp {\n    --stroke: var(--venia-brand-color-1-700);\n}\n\n.checkbox-input-2Tv:active:enabled,\n.checkbox-input-2Tv:focus:enabled {\n    box-shadow: -3px 3px rgb(var(--venia-brand-color-1-100));\n    outline: none;\n}\n",""]),t.locals={root:"checkbox-root-CLA",input:"checkbox-input-2Tv",icon:"checkbox-icon-2Jp",label:"checkbox-label-3N5"}},TuC4:function(e,t,n){"use strict"
var r=n("ERkP"),a=n.n(r),i=n("kQwz"),o=n("aWzz"),s=n("vB0K"),c=n.n(s),l=n("qrDf"),u=n.n(l),m={injectType:"singletonStyleTag",insert:"head",singleton:!0},d=(c()(u.a,m),u.a.locals||{}),p=n("YyrX"),f=function Message(e){var t,n=e.children,r=e.classes,o=e.fieldState,s=Object(i.a)().formatMessage,c=o.error,l=Object(p.a)(d,r),u=c?l.root_error:l.root
return c&&(t=s({id:c.id,defaultMessage:c.defaultMessage},{value:c.value})),a.a.createElement("p",{className:u},t||n)}
t.a=f
f.defaultProps={fieldState:{}},f.propTypes={children:o.node,classes:Object(o.shape)({root:o.string,root_error:o.string}),fieldState:Object(o.shape)({error:Object(o.shape)({id:o.string,defaultMessage:o.string,value:Object(o.oneOfType)([o.number,o.string])})})}},b55c:function(e,t,n){"use strict"
var r=n("qWom"),a=n.n(r),i=n("3yN8"),o=n.n(i),s=n("ERkP"),c=n.n(s),l=n("aWzz"),u=n("g97/"),m=n("YyrX"),d=n("TuC4"),p=n("74O1"),f=n("JqxX"),b=n("vB0K"),v=n.n(b),g=n("JDxZ"),h=n.n(g),y={injectType:"singletonStyleTag",insert:"head",singleton:!0},O=(v()(h.a,y),h.a.locals||{}),E=c.a.createElement(p.a,null),w=c.a.createElement(f.a,null),j=function Checkbox(e){var t=e.ariaLabel,n=e.classes,r=e.field,i=e.fieldValue,l=e.id,p=e.label,f=e.message,b=o()(e,["ariaLabel","classes","field","fieldValue","id","label","message"]),v=Object(u.j)(r),g=Object(u.k)(r),h=Object(m.a)(O,n),y=g.value?E:w
return Object(s.useEffect)(function(){null!=i&&i!==g.value&&v.setValue(i)},[v,g.value,i]),c.a.createElement(s.Fragment,null,c.a.createElement("label",{"aria-label":t,className:h.root,htmlFor:l},c.a.createElement(u.a,a()({},b,{className:h.input,field:r,id:l})),c.a.createElement("span",{className:h.icon},y),c.a.createElement("span",{className:h.label},p)),c.a.createElement(d.a,{fieldState:g},f))}
t.a=j
j.propTypes={ariaLabel:l.string,classes:Object(l.shape)({icon:l.string,input:l.string,label:l.string,message:l.string,root:l.string}),field:l.string.isRequired,id:l.string,label:l.node.isRequired,message:l.node}},n7cc:function(e,t,n){(t=e.exports=n("PBB4")(!1)).i(n("uuLD"),""),t.push([e.i,".password-passwordButton-3Kf {\n\n    --stroke: var(--venia-global-color-gray-500);\n    background: none;\n    border-radius: 0px;\n    border-style: none;\n    border-width: 0px;\n    padding: 0px;\n    min-width: 0px;\n}\n\n.password-passwordButton-3Kf:hover {\n    --stroke: var(--venia-global-color-gray-700);\n}\n\n.password-passwordButton-3Kf:focus {\n    box-shadow: none;\n    --stroke: var(--venia-global-color-gray-700);\n}\n\n.password-root-1o0:active {\n    --stroke: var(--venia-global-color-gray-700);\n}\n",""]),t.locals={passwordButton:"password-passwordButton-3Kf "+n("uuLD").locals.root,root:"password-root-1o0"}},pcRz:function(e,t,n){"use strict"
var r=n("ERkP"),a=n.n(r),i=n("kQwz"),o=n("6sB8"),s=n("g97/"),c=n("aWzz"),l=n("zCf4"),u=n("9nKk"),m=n.n(u),d=n("3yN8"),p=n.n(d),f=n("VtSi"),b=n.n(f),v=n("rV7w"),g=n.n(v),h=n("/4dI"),y=n.n(h),O=n("x8tt"),E=n("dnEv"),w=n("IbPg"),j=n("YyrX"),C=n("o353"),_=n("GVbq"),x=n("yrfM"),k=n("cy6f"),L=n("2+9x"),A=n.n(L)
function _templateObject6(){var e=A()(['\n    mutation MergeCartsAfterAccountCreation(\n        $sourceCartId: String!\n        $destinationCartId: String!\n    ) {\n        mergeCarts(\n            source_cart_id: $sourceCartId\n            destination_cart_id: $destinationCartId\n        ) @connection(key: "mergeCarts") {\n            id\n            items {\n                id\n            }\n        }\n    }\n'])
return _templateObject6=function _templateObject6(){return e},e}function _templateObject5(){var e=A()(["\n    query GetCartDetailsAfterAccountCreation($cartId: String!) {\n        cart(cart_id: $cartId) {\n            id\n            items {\n                id\n                prices {\n                    price {\n                        value\n                    }\n                }\n                product {\n                    id\n                    name\n                    sku\n                    small_image {\n                        url\n                        label\n                    }\n                    price {\n                        regularPrice {\n                            amount {\n                                value\n                            }\n                        }\n                    }\n                }\n                quantity\n                ... on ConfigurableCartItem {\n                    configurable_options {\n                        id\n                        option_label\n                        value_id\n                        value_label\n                    }\n                }\n            }\n            prices {\n                grand_total {\n                    value\n                    currency\n                }\n            }\n        }\n    }\n"])
return _templateObject5=function _templateObject5(){return e},e}function _templateObject4(){var e=A()(["\n    mutation CreateCartAfterAccountCreation {\n        cartId: createEmptyCart\n    }\n"])
return _templateObject4=function _templateObject4(){return e},e}function _templateObject3(){var e=A()(["\n    mutation SignInAfterCreate($email: String!, $password: String!) {\n        generateCustomerToken(email: $email, password: $password) {\n            token\n        }\n    }\n"])
return _templateObject3=function _templateObject3(){return e},e}function _templateObject2(){var e=A()(["\n    query GetCustomerAfterCreate {\n        customer {\n            id\n            email\n            firstname\n            lastname\n            is_subscribed\n        }\n    }\n"])
return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=A()(["\n    mutation CreateAccount(\n        $email: String!\n        $firstname: String!\n        $lastname: String!\n        $password: String!\n        $is_subscribed: Boolean!\n    ) {\n        createCustomer(\n            input: {\n                email: $email\n                firstname: $firstname\n                lastname: $lastname\n                password: $password\n                is_subscribed: $is_subscribed\n            }\n        ) {\n            # The createCustomer mutation returns a non-nullable CustomerOutput type\n            # which requires that at least one of the sub fields be returned.\n            customer {\n                id\n            }\n        }\n    }\n"])
return _templateObject=function _templateObject(){return e},e}var B=Object(O.gql)(_templateObject()),M=Object(O.gql)(_templateObject2()),T=Object(O.gql)(_templateObject3()),N={createAccountMutation:B,createCartMutation:Object(O.gql)(_templateObject4()),getCartDetailsQuery:Object(O.gql)(_templateObject5()),getCustomerQuery:M,mergeCartsMutation:Object(O.gql)(_templateObject6()),signInMutation:T}
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var S=function useCreateAccount(e){var t=e.initialValues,n=void 0===t?{}:t,a=e.onSubmit,i=e.onCancel,o=Object(j.a)(N,e.operations),s=o.createAccountMutation,c=o.createCartMutation,l=o.getCartDetailsQuery,u=o.getCustomerQuery,d=o.mergeCartsMutation,f=o.signInMutation,v=Object(O.useApolloClient)(),h=Object(r.useState)(!1),L=y()(h,2),A=L[0],B=L[1],M=Object(_.b)(),T=y()(M,2),S=T[0].cartId,P=T[1],I=P.createCart,D=P.removeCart,$=P.getCartDetails,z=Object(C.b)(),W=y()(z,2),q=W[0],K=q.isGettingDetails,R=q.isSignedIn,V=W[1],Q=V.getUserDetails,J=V.setToken,F=Object(O.useMutation)(c),H=y()(F,1)[0],U=Object(O.useMutation)(d),X=y()(U,1)[0],G=Object(O.useMutation)(s,{fetchPolicy:"no-cache"}),Z=y()(G,2),Y=Z[0],ee=Z[1].error,te=Object(O.useMutation)(f,{fetchPolicy:"no-cache"}),ne=y()(te,2),re=ne[0],ae=ne[1].error,ie=Object(x.a)(u),oe=Object(x.a)(l),se=Object(r.useCallback)(function(){i()},[i]),ce=Object(r.useCallback)(function(){var e=g()(b.a.mark(function _callee(e){var t,n,r,i
return b.a.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return B(!0),o.prev=1,t=S,o.next=5,Y({variables:{email:e.customer.email,firstname:e.customer.firstname,lastname:e.customer.lastname,password:e.password,is_subscribed:!!e.subscribe}})
case 5:return o.next=7,re({variables:{email:e.customer.email,password:e.password}})
case 7:return n=o.sent,r=n.data.generateCustomerToken.token,o.next=11,J(r)
case 11:return o.next=13,Object(E.a)(v)
case 13:return o.next=15,Object(w.a)(v)
case 15:return o.next=17,D()
case 17:return o.next=19,I({fetchCartId:H})
case 19:return o.next=21,Object(k.retrieveCartId)()
case 21:return i=o.sent,o.next=24,X({variables:{destinationCartId:i,sourceCartId:t}})
case 24:return o.next=26,Q({fetchUserDetails:ie})
case 26:return o.next=28,$({fetchCartId:H,fetchCartDetails:oe})
case 28:a&&a(),o.next=35
break
case 31:o.prev=31,o.t0=o.catch(1),B(!1)
case 35:case"end":return o.stop()}},_callee,null,[[1,31]])}))
return function(t){return e.apply(this,arguments)}}(),[S,v,D,Y,re,J,I,H,X,Q,ie,$,oe,a]),le=Object(r.useMemo)(function(){return function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach(function(t){m()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({customer:{email:n.email,firstname:n.firstName,lastname:n.lastName}},p()(n,["email","firstName","lastName"]))},[n])
return{errors:Object(r.useMemo)(function(){return new Map([["createAccountQuery",ee],["signInMutation",ae]])},[ee,ae]),handleCancel:se,handleSubmit:ce,initialValues:le,isDisabled:A||K,isSignedIn:R}},P=n("6ctP"),I=n("QQG3"),D=n("loE8"),$=n("b55c"),z=n("v8zp"),W=n("sAzd"),q=n("vB0K"),K=n.n(q),R=n("CQXy"),V=n.n(R),Q={injectType:"singletonStyleTag",insert:"head",singleton:!0},J=(K()(V.a,Q),V.a.locals||{}),F=n("MR3a"),H=n("2gp+"),U=function CreateAccount(e){var t=S({initialValues:e.initialValues,onSubmit:e.onSubmit,onCancel:e.onCancel}),n=t.errors,r=t.handleCancel,c=t.handleSubmit,u=t.isDisabled,m=t.isSignedIn,d=t.initialValues,p=Object(i.a)().formatMessage,f=Object(j.a)(J,e.classes)
if(m)return a.a.createElement(l.a,{to:"/"})
var b=e.isCancelButtonHidden?null:a.a.createElement(D.a,{className:f.cancelButton,disabled:u,type:"button",priority:"low",onClick:r},a.a.createElement(o.a,{id:"createAccount.cancelText",defaultMessage:"Cancel"})),v=a.a.createElement(D.a,{className:f.submitButton,disabled:u,type:"submit",priority:"high"},a.a.createElement(o.a,{id:"createAccount.createAccountText",defaultMessage:"Create an Account"}))
return a.a.createElement(s.b,{className:f.root,initialValues:d,onSubmit:c},a.a.createElement("h2",{className:f.title},a.a.createElement(o.a,{id:"createAccount.createAccountText",defaultMessage:"Create an Account"})),a.a.createElement(F.a,{errors:Array.from(n.values())}),a.a.createElement(z.a,{label:p({id:"createAccount.firstNameText",defaultMessage:"First Name"})},a.a.createElement(W.a,{field:"customer.firstname",autoComplete:"given-name",validate:I.c,validateOnBlur:!0,mask:function mask(e){return e&&e.trim()},maskOnBlur:!0})),a.a.createElement(z.a,{label:p({id:"createAccount.lastNameText",defaultMessage:"Last Name"})},a.a.createElement(W.a,{field:"customer.lastname",autoComplete:"family-name",validate:I.c,validateOnBlur:!0,mask:function mask(e){return e&&e.trim()},maskOnBlur:!0})),a.a.createElement(z.a,{label:p({id:"createAccount.emailText",defaultMessage:"Email"})},a.a.createElement(W.a,{field:"customer.email",autoComplete:"email",validate:I.c,validateOnBlur:!0,mask:function mask(e){return e&&e.trim()},maskOnBlur:!0})),a.a.createElement(H.a,{autoComplete:"new-password",fieldName:"password",isToggleButtonHidden:!1,label:p({id:"createAccount.passwordText",defaultMessage:"Password"}),validate:Object(P.a)([I.c,[I.a,8],I.d]),validateOnBlur:!0,mask:function mask(e){return e&&e.trim()},maskOnBlur:!0}),a.a.createElement("div",{className:f.subscribe},a.a.createElement($.a,{field:"subscribe",id:"subscribe",label:p({id:"createAccount.subscribeText",defaultMessage:"Subscribe to news and updates"})})),a.a.createElement("div",{className:f.actions},v,b))}
U.propTypes={classes:Object(c.shape)({actions:c.string,lead:c.string,root:c.string,subscribe:c.string}),initialValues:Object(c.shape)({email:c.string,firstName:c.string,lastName:c.string}),isCancelButtonHidden:c.bool,onSubmit:c.func,onCancel:c.func},U.defaultProps={onCancel:function onCancel(){},isCancelButtonHidden:!0}
t.a=U},qrDf:function(e,t,n){(t=e.exports=n("PBB4")(!1)).push([e.i,".message-root-2kZ {\n    color: rgb(var(--venia-global-color-text));\n    font-size: 0.875rem;\n    font-weight: 400;\n    line-height: 1rem;\n    padding: 0.625rem 0.125rem 0.125rem;\n}\n\n.message-root-2kZ:empty {\n    display: none;\n}\n\n.message-root_error-3Tf {\n    color: rgb(var(--venia-global-color-error));\n    font-weight: var(--venia-global-fontWeight-semibold);\n}\n",""]),t.locals={root:"message-root-2kZ",root_error:"message-root_error-3Tf message-root-2kZ"}},r2q8:function(e,t,n){"use strict"
var r,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function ReflectApply(e,t,n){return Function.prototype.apply.call(e,t,n)}
r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e)}
var o=Number.isNaN||function NumberIsNaN(e){return e!=e}
function EventEmitter(){EventEmitter.init.call(this)}e.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0
var s=10
function checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,n,r){var a,i,o
if(checkListener(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount
else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=_getMaxListeners(e))>0&&o.length>a&&!o.warned){o.warned=!0
var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")
s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,function ProcessEmitWarning(e){console&&console.warn}()}return e}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r)
return a.listener=n,r.wrapFn=a,a}function _listeners(e,t,n){var r=e._events
if(void 0===r)return[]
var a=r[t]
return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n]
return t}(a):arrayClone(a,a.length)}function listenerCount(e){var t=this._events
if(void 0!==t){var n=t[e]
if("function"==typeof n)return 1
if(void 0!==n)return n.length}return 0}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r]
return n}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")
s=e}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".")
return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n])
var r="error"===e,a=this._events
if(void 0!==a)r=r&&void 0===a.error
else if(!r)return!1
if(r){var o
if(t.length>0&&(o=t[0]),o instanceof Error)throw o
var s=new Error("Unhandled error."+(o?" ("+o.message+")":""))
throw s.context=o,s}var c=a[e]
if(void 0===c)return!1
if("function"==typeof c)i(c,this,t)
else{var l=c.length,u=arrayClone(c,l)
for(n=0;n<l;++n)i(u[n],this,t)}return!0},EventEmitter.prototype.addListener=function addListener(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function once(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function removeListener(e,t){var n,r,a,i,o
if(checkListener(t),void 0===(r=this._events))return this
if(void 0===(n=r[e]))return this
if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t))
else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i
break}if(a<0)return this
0===a?n.shift():function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1]
e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t,n,r
if(void 0===(n=this._events))return this
if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this
if(0===arguments.length){var a,i=Object.keys(n)
for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a)
return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t)
else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r])
return this},EventEmitter.prototype.listeners=function listeners(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function rawListeners(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?r(this._events):[]}}}])
